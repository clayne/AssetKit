cmake_minimum_required(VERSION 3.14)
project(assetio C)

set(CMAKE_C_STANDARD 99)

set(CMAKE_C_FLAGS "-Wall -Wextra -std=gnu99 -Wstrict-aliasing=2 -fstrict-aliasing -pedantic -Wmissing-declarations -Wno-overlength-strings")
set(CMAKE_C_FLAGS_DEBUG "-g")
set(CMAKE_C_FLAGS_RELEASE "-O3")

include_directories(
        "/usr/include"
        "${PROJECT_SOURCE_DIR}/include/ak")

include_directories(./lib/libxml2/include)
include_directories(./lib/jemalloc/include)
include_directories(./lib/cglm/include)
include_directories(./lib/curl/include)
include_directories(./lib/libuv/include)
include_directories(./lib/libds/include)
include_directories(./lib/stb)
include_directories(./lib/jansson/src)

include_directories(include/)
include_directories(include/ak)
include_directories(src/collada/1.4)
include_directories(src/collada/brep)
include_directories(src/collada/bugfix)
include_directories(src/collada/core)
include_directories(src/collada/fx)
include_directories(src/gltf/core)

link_directories(/usr/local/lib ./lib/jemalloc/lib ./lib/libxml2/.libs ./lib/curl/lib/.libs ./lib/libuv/.libs ./lib/libds/.libs ./lib/jansson/src/.libs)

add_library(assetkit STATIC
        src/array/source_array.c
        src/bbox/bbox.c
        src/bbox/bbox.h
        src/bbox/bbox_geom.c
        src/bbox/bbox_mesh.c
        src/bbox/bbox_mesh_prim.c
        src/bbox/bbox_scene.c
        src/bitwise/bitwise.h
        src/camera/cam.c
        src/collada/1.4/dae14.c
        src/collada/1.4/dae14.h
        src/collada/1.4/dae14_image.c
        src/collada/1.4/dae14_image.h
        src/collada/1.4/dae14_surface.c
        src/collada/1.4/dae14_surface.h
        src/collada/brep/dae_brep.c
        src/collada/brep/dae_brep.h
        src/collada/brep/dae_brep_curve.c
        src/collada/brep/dae_brep_curve.h
        src/collada/brep/dae_brep_nurbs.c
        src/collada/brep/dae_brep_nurbs.h
        src/collada/brep/dae_brep_surface.c
        src/collada/brep/dae_brep_surface.h
        src/collada/brep/dae_brep_topology.c
        src/collada/brep/dae_brep_topology.h
        src/collada/bugfix/transp.c
        src/collada/bugfix/transp.h
        src/collada/core/dae_accessor.c
        src/collada/core/dae_accessor.h
        src/collada/core/dae_anim.c
        src/collada/core/dae_anim.h
        src/collada/core/dae_annotate.c
        src/collada/core/dae_annotate.h
        src/collada/core/dae_asset.c
        src/collada/core/dae_asset.h
        src/collada/core/dae_camera.c
        src/collada/core/dae_camera.h
        src/collada/core/dae_color.c
        src/collada/core/dae_color.h
        src/collada/core/dae_controller.c
        src/collada/core/dae_controller.h
        src/collada/core/dae_enums.c
        src/collada/core/dae_enums.h
        src/collada/core/dae_evaluate_scene.c
        src/collada/core/dae_evaluate_scene.h
        src/collada/core/dae_geometry.c
        src/collada/core/dae_geometry.h
        src/collada/core/dae_light.c
        src/collada/core/dae_light.h
        src/collada/core/dae_lines.c
        src/collada/core/dae_lines.h
        src/collada/core/dae_mesh.c
        src/collada/core/dae_mesh.h
        src/collada/core/dae_morph.c
        src/collada/core/dae_morph.h
        src/collada/core/dae_node.c
        src/collada/core/dae_node.h
        src/collada/core/dae_param.c
        src/collada/core/dae_param.h
        src/collada/core/dae_polygons.c
        src/collada/core/dae_polygons.h
        src/collada/core/dae_render.c
        src/collada/core/dae_render.h
        src/collada/core/dae_scene.c
        src/collada/core/dae_scene.h
        src/collada/core/dae_skin.c
        src/collada/core/dae_skin.h
        src/collada/core/dae_source.c
        src/collada/core/dae_source.h
        src/collada/core/dae_spline.c
        src/collada/core/dae_spline.h
        src/collada/core/dae_technique.c
        src/collada/core/dae_technique.h
        src/collada/core/dae_triangles.c
        src/collada/core/dae_triangles.h
        src/collada/core/dae_value.c
        src/collada/core/dae_value.h
        src/collada/core/dae_vertices.c
        src/collada/core/dae_vertices.h
        src/collada/core/dae_visual_scene.c
        src/collada/core/dae_visual_scene.h
        src/collada/fx/dae_fx_binary.c
        src/collada/fx/dae_fx_binary.h
        src/collada/fx/dae_fx_blinn_phong.c
        src/collada/fx/dae_fx_blinn_phong.h
        src/collada/fx/dae_fx_color_or_tex.c
        src/collada/fx/dae_fx_color_or_tex.h
        src/collada/fx/dae_fx_constant.c
        src/collada/fx/dae_fx_constant.h
        src/collada/fx/dae_fx_effect.c
        src/collada/fx/dae_fx_effect.h
        src/collada/fx/dae_fx_enums.c
        src/collada/fx/dae_fx_enums.h
        src/collada/fx/dae_fx_evaluate.c
        src/collada/fx/dae_fx_evaluate.h
        src/collada/fx/dae_fx_float_or_param.c
        src/collada/fx/dae_fx_float_or_param.h
        src/collada/fx/dae_fx_image.c
        src/collada/fx/dae_fx_image.h
        src/collada/fx/dae_fx_lambert.c
        src/collada/fx/dae_fx_lambert.h
        src/collada/fx/dae_fx_material.c
        src/collada/fx/dae_fx_material.h
        src/collada/fx/dae_fx_pass.c
        src/collada/fx/dae_fx_pass.h
        src/collada/fx/dae_fx_profile.c
        src/collada/fx/dae_fx_profile.h
        src/collada/fx/dae_fx_program.c
        src/collada/fx/dae_fx_program.h
        src/collada/fx/dae_fx_sampler.c
        src/collada/fx/dae_fx_sampler.h
        src/collada/fx/dae_fx_shader.c
        src/collada/fx/dae_fx_shader.h
        src/collada/fx/dae_fx_states.c
        src/collada/fx/dae_fx_states.h
        src/collada/fx/dae_fx_states_detail.c
        src/collada/fx/dae_fx_states_detail.h
        src/collada/fx/dae_fx_technique.c
        src/collada/fx/dae_fx_technique.h
        src/collada/fx/dae_fx_uniform.c
        src/collada/fx/dae_fx_uniform.h
        src/collada/dae.c
        src/collada/dae.h
        src/collada/dae_common.c
        src/collada/dae_common.h
        src/collada/dae_fixangle.c
        src/collada/dae_fixangle.h
        src/collada/dae_geom_fixup.c
        src/collada/dae_geom_fixup.h
        src/collada/dae_lib.c
        src/collada/dae_lib.h
        src/collada/dae_mesh_fixup.c
        src/collada/dae_mesh_fixup.h
        src/collada/dae_node_fixup.c
        src/collada/dae_node_fixup.h
        src/collada/dae_postscript.c
        src/collada/dae_postscript.h
        src/collada/dae_strpool.c
        src/collada/dae_strpool.h
        src/controller/ctlr.c
        src/coord_sys/coord_camera.c
        src/coord_sys/coord_common.c
        src/coord_sys/coord_common.h
        src/coord_sys/coord_doc.c
        src/coord_sys/coord_geom.c
        src/coord_sys/coord_mesh.c
        src/coord_sys/coord_node.c
        src/coord_sys/coord_scene.c
        src/coord_sys/coord_transform.c
        src/coord_sys/coord_transforms.c
        src/coord_sys/coord_vector.c
        src/default/def_cam.c
        src/default/def_cam.h
        src/default/def_cmp.c
        src/default/def_coord.c
        src/default/def_id.c
        src/default/def_light.c
        src/default/def_light.h
        src/default/def_material.c
        src/default/def_material.h
        src/default/def_opt.c
        src/default/def_opt.h
        src/default/def_semantic.c
        src/default/def_semantic.h
        src/default/def_type.c
        src/default/def_type.h
        src/geom/geom_mesh.c
        src/gltf/core/gltf_accessor.c
        src/gltf/core/gltf_accessor.h
        src/gltf/core/gltf_anim.c
        src/gltf/core/gltf_anim.h
        src/gltf/core/gltf_asset.c
        src/gltf/core/gltf_asset.h
        src/gltf/core/gltf_buffer.c
        src/gltf/core/gltf_buffer.h
        src/gltf/core/gltf_camera.c
        src/gltf/core/gltf_camera.h
        src/gltf/core/gltf_enums.c
        src/gltf/core/gltf_enums.h
        src/gltf/core/gltf_image.c
        src/gltf/core/gltf_image.h
        src/gltf/core/gltf_material.c
        src/gltf/core/gltf_material.h
        src/gltf/core/gltf_mesh.c
        src/gltf/core/gltf_mesh.h
        src/gltf/core/gltf_morph.c
        src/gltf/core/gltf_morph.h
        src/gltf/core/gltf_node.c
        src/gltf/core/gltf_node.h
        src/gltf/core/gltf_profile.c
        src/gltf/core/gltf_profile.h
        src/gltf/core/gltf_sampler.c
        src/gltf/core/gltf_sampler.h
        src/gltf/core/gltf_scene.c
        src/gltf/core/gltf_scene.h
        src/gltf/core/gltf_skin.c
        src/gltf/core/gltf_skin.h
        src/gltf/core/gltf_texture.c
        src/gltf/core/gltf_texture.h
        src/gltf/gltf.c
        src/gltf/gltf.h
        src/gltf/gltf_common.h
        src/gltf/gltf_mesh_fixup.c
        src/gltf/gltf_mesh_fixup.h
        src/gltf/gltf_postscript.c
        src/gltf/gltf_postscript.h
        src/gltf/gltf_strpool.c
        src/gltf/gltf_strpool.h
        src/image/image.c
        src/instance/inst.c
        src/instance/inst_list.c
        src/lib/lib.c
        src/lib/lib_geom.c
        src/light/light.c
        src/mesh/mesh_duplicator.c
        src/mesh/mesh_edit.c
        src/mesh/mesh_edit_buff.c
        src/mesh/mesh_edit_buff_fixup.c
        src/mesh/mesh_edit_common.h
        src/mesh/mesh_edit_index.c
        src/mesh/mesh_index.c
        src/mesh/mesh_index.h
        src/mesh/mesh_input.c
        src/mesh/mesh_material.c
        src/mesh/mesh_normal.c
        src/mesh/mesh_triangulate.c
        src/mesh/mesh_util.c
        src/mesh/mesh_util.h
        src/node/node.c
        src/resc/curl.c
        src/resc/curl.h
        src/resc/path.c
        src/resc/resource.c
        src/resc/resource.h
        src/resc/url.c
        src/skin/skin.c
        src/skin/skin_fix.c
        src/skin/skin_fix.h
        src/transform/trans.c
        src/transform/trans_dup.c
        src/transform/trans_traverse.c
        src/accessor.c
        src/accessor.h
        src/array.c
        src/array.h
        src/asset.c
        src/assetkit.c
        src/common.c
        src/common.h
        src/config.h
        src/data.c
        src/data.h
        src/find.c
        src/id.c
        src/id.h
        src/json.c
        src/json.h
        src/main.c
        src/map.c
        src/memory.c
        src/memory_common.h
        src/memory_ext.c
        src/memory_intr.c
        src/memory_lt.c
        src/memory_lt.h
        src/memory_rb.c
        src/memory_rb.h
        src/profile.c
        src/profile.h
        src/sid.c
        src/sid.h
        src/sid_constr.c
        src/string.c
        src/trash.c
        src/trash.h
        src/tree.c
        src/tree.h
        src/type.c
        src/type.h
        src/utils.c
        src/utils.h
        src/xml.c
        src/xml.h)

target_link_libraries(assetkit -lxml2 -ljemalloc -lcurl -luv -lds -ljansson)

#src/win32/strptime.c
# src/dllmain.c
